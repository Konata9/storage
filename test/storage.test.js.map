{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./index.js","webpack:///./node_modules/@konata9/typecheck.js/dist/index.js","webpack:///./src/storage.js"],"names":["ONE_MINUTE","ONE_HOUR","ONE_DAY","ONE_MONTH","type","getType","setType","Error","set","insertItem","value","expireKey","expires","typecheck","key","hasOwnProperty","window","setItem","JSON","stringify","Date","get","keyItem","map","checkExpired","remove","getItem","parse","removeItem","clear","hasKey","listKeys","includes","keyList","push"],"mappings":"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","file":"storage.test.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./index.js\");\n","import Storage from \"./src/storage\";\nexport default Storage;\n","module.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,\"a\",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p=\"\",r(r.s=0)}([function(e,t,r){\"use strict\";r.r(t);t.default=function(e){var t=Object.prototype.toString.call(e);return t.toLowerCase().slice(8,t.length-1)}}]).default;\n//# sourceMappingURL=index.js.map","import typecheck from \"@konata9/typecheck.js\";\n\nexport default {\n  // CONSTANT VALUE\n  ONE_MINUTE: 1000 * 60,\n  ONE_HOUR: this.ONE_MINUTE * 60,\n  ONE_DAY: this.ONE_HOUR * 24,\n  ONE_MONTH: this.ONE_DAY * 30,\n  // type value & function\n  type: null || \"session\",\n  getType: function () {\n    return this.type;\n  },\n  setType: function (type) {\n    if (!type) {\n      throw new Error(\"Storage type can not be null.\");\n    }\n    this.type = type;\n  },\n  // storage function\n  set: function (insertItem, value = null, expireKey = false, expires = this.ONE_DAY) {\n    if (typecheck(insertItem) === \"object\") {\n      for (let key in insertItem) {\n        if (insertItem.hasOwnProperty(key)) {\n          window[`${this.type}Storage`].setItem(key, JSON.stringify(insertItem[key]));\n        }\n      }\n    } else if (typecheck(insertItem) === \"string\") {\n      if (expireKey) {\n        window[`${this.type}Storage`].setItem(`__${insertItem}__`, JSON.stringify(+new Date() + expires))\n      }\n      window[`${this.type}Storage`].setItem(insertItem, JSON.stringify(value))\n    } else {\n      throw new Error(\"InsertItem only accept object or string.\");\n    }\n  },\n  get: function (keyItem) {\n    if (typecheck(keyItem) === \"array\") {\n      return keyItem.map(key => {\n        if (this.checkExpired(key)) {\n          this.remove([keyItem, `__${keyItem}__`])\n          return null\n        } else {\n          return window[`${this.type}Storage`].getItem(JSON.parse(key))\n        }\n      });\n    } else if (typecheck(keyItem) === \"string\") {\n      if (this.checkExpired(keyItem)) {\n        this.remove([keyItem, `__${keyItem}__`])\n        return null\n      } else {\n        return window[`${this.type}Storage`].getItem(JSON.parse(keyItem));\n      }\n    } else {\n      throw new Error(\"KeyItem only accept array or string.\");\n    }\n  },\n  remove: function (keyItem = []) {\n    if (typecheck(keyItem) === \"array\") {\n      for (let key in keyItem) {\n        window[`${this.type}Storage`].removeItem(key);\n      }\n    } else if (typecheck(keyItem) === \"string\") {\n      window[`${this.type}Storage`].removeItem(keyItem);\n    } else {\n      throw new Error(\"KeyItem only accept array or string.\");\n    }\n  },\n  clear: function () {\n    window[`${this.type}Storage`].clear();\n  },\n  hasKey: function (key) {\n    if (typecheck(key) !== \"string\") {\n      throw new Error(\"Key must be a string.\");\n    }\n    return this.listKeys().includes(key);\n  },\n  listKeys: function () {\n    const keyList = [];\n    for (let key in window[`${this.type}Storage`]) {\n      if (window[`${this.type}Storage`].hasOwnProperty(key)) {\n        keyList.push(key);\n      }\n    }\n    return keyList;\n  },\n  checkExpired: function (key) {\n    if (typecheck(key) !== 'string') {\n      throw new Error(\"Key must be a string.\")\n    }\n    let expireKey = `__${key}__`\n    if (this.hasKey(expireKey)) {\n      return this.get(expireKey) < +new Date()\n    } else {\n      return null\n    }\n  }\n};\n"],"sourceRoot":""}